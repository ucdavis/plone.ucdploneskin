<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
      i18n:domain="plone">

<body>

<!-- THE PATHBAR (breadcrumbs) DEFINITION -->
<div metal:define-macro="path_bar"
     id="portal-breadcrumbs"
     tal:define="breadcrumbs python:putils.createBreadCrumbs(here);
                     portal_url portal_url|utool">


    <tal:comment replace="nothing">
      Only link to UCD home page if we're viewing the front-page
    </tal:comment>

    <span tal:condition="python:here.getSectionFromURL() == 'section-front-page'">
      <a href="http://www.ucdavis.edu" title="UC Davis Home Page">UC Davis home</a>
      <span class="breadcrumbSeparator">
          &gt;      
      </span>
    </span>


    <tal:comment replace="nothing">
      Don't hyper link to the portal root if we are viewing the front-page
    </tal:comment>

    <span tal:condition="python:here.getSectionFromURL() == 'section-front-page'"
	style="color : #000000; font-weight: bold;">
      <span tal:content="portal_title" tal:omit-tag="" />
    </span>

    <span tal:condition="python:here.getSectionFromURL() != 'section-front-page'">
      <a i18n:translate="tabs_home" tal:attributes="href python:portal_url;title portal_title">  
        <span tal:content="portal_title" tal:omit-tag="" />
      </a>
    </span>



    <span tal:condition="breadcrumbs" class="breadcrumbSeparator">
        <tal:ltr condition="not: isRTL">&gt;</tal:ltr> 
        <tal:rtl condition="isRTL">&raquo;</tal:rtl> 
    </span>
    <span tal:repeat="crumb breadcrumbs"
          tal:attributes="dir python:test(isRTL, 'rtl', 'ltr')">

          <tal:noTrim tal:define="global crumbTitle python: crumb['Title']" />

          <tal:trim tal:define="trimBreadCrumbs here/portal_properties/ucdploneskin_properties/trimBreadCrumbs"
                    tal:condition="here/portal_properties/ucdploneskin_properties/trimBreadCrumbs">
            <tal:trimCond tal:condition="python: len(crumb['Title']) > trimBreadCrumbs">
              <tal:doTrim tal:define="global crumbTitle python: crumb['Title'][0:trimBreadCrumbs] + '...'" />
            </tal:trimCond>
          </tal:trim>

          <tal:last tal:define="is_last repeat/crumb/end">
              <a href="#"
                 tal:omit-tag="not: crumb/absolute_url"
                 tal:condition="python:not is_last"
                 tal:attributes="href crumb/absolute_url"
                 tal:content="crumbTitle">
                  crumb
              </a>
              <span class="breadcrumbSeparator" tal:condition="not: is_last"> 
                  <tal:ltr condition="not: isRTL">&gt;</tal:ltr> 
                  <tal:rtl condition="isRTL">&raquo;</tal:rtl> 
              </span>
              <span tal:condition="is_last"
                    tal:content="crumbTitle" style="color : #000000; font-weight: bold;">crumb</span>
           </tal:last>

    </span>

</div>
</body>
</html>
